{% extends "layout.html" %}
{% block title %}
News
{% endblock %}
{% block header %}
<script>

function request_news() {
    var container = $("#list_result");
    container.empty();

    $.ajax({
        url: "api/newsitems",
        type: "get",
        dataType: "json",
        success: function (data) {
            $.each(data, function(index, item) {
                var item_date = moment(item.published);
                var formatted_date = item_date.format("dd. DD.MM.YYYY");

                var cell = `<a href="` + item.link_url + `" class="list-group-item list-group-item-action d-flex flex-row align-items-center p-2" target="_blank">
                                <div class="m-3" style="max-width:40px;"><img src="` + item.publisher_icon_url + `" class="img-fluid rounded" style="max-width:40px;"></div>
                                <div class="">
                                    <small>` + formatted_date + `</small>
                                    <h5 class="mb-1">` + item.publisher_name + `</h5>
                                    <p class="mb-1">` + item.content + `</p>
                                </div>
                        </div>
                  </a>`;
                container.append(cell);
            });
        }
    });
}

$(function() {
    request_news();
});

</script>
{% endblock %}
{% block content %}

    <div class="p-3">
        <div class="list-group" id="list_result"></div>
    </div>

{% endblock %}